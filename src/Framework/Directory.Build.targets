<Project>
  <Import Project="$([MSBuild]::GetDirectoryNameOfFileAbove($(MSBuildThisFileDirectory)..\, Directory.Build.targets))\Directory.Build.targets" />

  <Import Condition=" '$(MSBuildProjectExtension)' == '.pkgproj' " Project="Metapackage.targets" />

  <PropertyGroup Condition=" '$(MSBuildProjectExtension)' == '.shfxproj' ">
    <RestoreSources>$(RestoreSources);https://dotnet.myget.org/F/aspnetcore-dev/api/v3/index.json</RestoreSources>
  </PropertyGroup>

  <Target Name="PopulateNuspec" BeforeTargets="GenerateNuspec" Condition=" '$(MSBuildProjectExtension)' == '.shfxproj' ">
    <PropertyGroup>
      <NuspecProperties>
        id=$(PackageId);
        version=$(PackageVersion);
        authors=$(Authors);
        rid=$(SharedFxRid);
        description=$(PackageDescription);
        tags=$(PackageTags.Replace(';', ' '));
        licenseUrl=$(PackageLicenseUrl);
        projectUrl=$(PackageProjectUrl);
        iconUrl=$(PackageIconUrl);
        repositoryUrl=$(RepositoryUrl);
        repositoryCommit=$(RepositoryCommit);
        copyright=$(Copyright);
        targetFramework=$(TargetFramework);
        symbolsAssets=$(SymbolsOutputPath);
        nativeAssets=$(NativeAssetsOutputPath);
        runtimeAssets=$(RuntimeAssetsOutputPath);
      </NuspecProperties>
    </PropertyGroup>
  </Target>
</Project>
