<Project>
  <!-- this file is shared between Helix.proj and .csproj files -->
  <PropertyGroup>
    <HelixQueueAlpine317>(Alpine.317.Amd64.Open)Ubuntu.2204.Amd64.Open@mcr.microsoft.com/dotnet-buildtools/prereqs:alpine-3.17-helix-amd64</HelixQueueAlpine317>
    <HelixQueueCentos7>(Centos.7.Amd64.Open)Ubuntu.2204.Amd64.Open.svc@mcr.microsoft.com/dotnet-buildtools/prereqs:centos-7-mlnet-helix</HelixQueueCentos7>
    <HelixQueueDebian11>(Debian.11.Amd64.Open)Ubuntu.2204.Amd64.Open@mcr.microsoft.com/dotnet-buildtools/prereqs:debian-11-helix-amd64</HelixQueueDebian11>
    <HelixQueueFedora38>(Fedora.38.Amd64.Open)Ubuntu.2204.Amd64.Open@mcr.microsoft.com/dotnet-buildtools/prereqs:fedora-38-helix</HelixQueueFedora38>
    <HelixQueueMariner>(Mariner)Ubuntu.2204.Amd64.Open@mcr.microsoft.com/dotnet-buildtools/prereqs:cbl-mariner-2.0-helix-amd64</HelixQueueMariner>
    <HelixQueueArmDebian11>(Debian.11.Arm64.Open)ubuntu.2204.armarch.open@mcr.microsoft.com/dotnet-buildtools/prereqs:debian-11-helix-arm64v8</HelixQueueArmDebian11>
  </PropertyGroup>

  <ItemGroup Condition="'$(IsWindowsOnlyTest)' != 'true'">
    <HelixAvailablePlatform Include="Windows" />
    <HelixAvailablePlatform Include="OSX" />
    <HelixAvailablePlatform Include="Linux" />
  </ItemGroup>

  <ItemGroup Condition="'$(IsWindowsOnlyTest)' == 'true'">
    <HelixAvailablePlatform Include="Windows" />
  </ItemGroup>

  <!-- x64 PR(ci.yaml) required queues for internal and public cases -->
  <ItemGroup Condition="'$(IsRequiredCheck)' == 'true' AND '$(TargetArchitecture)' == 'x64' AND '$(IsHelixDaily)' != 'true'">
    <HelixAvailableTargetQueue Include="Ubuntu.2004.Amd64.Open" Platform="Linux" />
    <HelixAvailableTargetQueue Include="Windows.11.Amd64.Client.Open" Platform="Windows" />
    <HelixAvailableTargetQueue Include="OSX.1200.Amd64.Open" Platform="OSX" />
  </ItemGroup>

  <!-- x64 Queues for public helix-matrix.yml and quarantine pipelines, except in windows-only cases -->
  <ItemGroup Condition="'$(TargetArchitecture)' == 'x64' AND '$(IsHelixDaily)' == 'true' AND '$(_UseHelixOpenQueues)' == 'true' AND '$(IsWindowsOnlyTest)' != 'true'">
    <!-- Mac -->
    <HelixAvailableTargetQueue Include="OSX.13.Amd64.Open" Platform="OSX" />

    <!-- Containers -->
    <HelixAvailableTargetQueue Include="$(HelixQueueAlpine317)" Platform="Linux" />
    <HelixAvailableTargetQueue Include="$(HelixQueueCentos7)" Platform="Linux" />
    <HelixAvailableTargetQueue Include="$(HelixQueueDebian11)" Platform="Linux" />
    <HelixAvailableTargetQueue Include="$(HelixQueueFedora38)" Platform="Linux" />
    <HelixAvailableTargetQueue Include="$(HelixQueueMariner)" Platform="Linux" />
  </ItemGroup>

  <!-- x64 Queues for public helix-matrix.yml and quarantine pipelines, Windows cases-->
  <ItemGroup Condition="'$(TargetArchitecture)' == 'x64' AND '$(IsHelixDaily)' == 'true' AND '$(_UseHelixOpenQueues)' == 'true'">
    <HelixAvailableTargetQueue Include="Windows.Amd64.Server2022.Open" Platform="Windows" />
  </ItemGroup>

  <!-- x64 Queues for internal helix-matrix.yml and quarantine pipelines -->
  <!-- The preview queue is only available internally, and should only be run on a daily basis -->
  <ItemGroup Condition="'$(TargetArchitecture)' == 'x64' AND '$(IsHelixDaily)' == 'true' AND '$(_UseHelixOpenQueues)' != 'true'">
    <HelixAvailableTargetQueue Include="Windows.10.Amd64.ClientPre.VS2019.Pre" Platform="Windows" />
  </ItemGroup>

  <!-- arm64 queues for helix-matrix.yml and quarantine pipeline -->
  <ItemGroup Condition="'$(TargetArchitecture)' == 'arm64' AND '$(IsHelixDaily)' == 'true' AND '$(_UseHelixOpenQueues)' == 'true' AND '$(IsWindowsOnlyTest)' != 'true'">
    <HelixAvailableTargetQueue Include="$(HelixQueueArmDebian11)" Platform="Linux" />
  </ItemGroup>

  <!-- IIS Express isn't supported on arm64 and most of the IsWindowsOnlyTests depend on it's setup scripts. -->
  <ItemGroup Condition="'$(TargetArchitecture)' == 'arm64' AND '$(IsHelixDaily)' == 'true' AND '$(_UseHelixOpenQueues)' == 'true' AND '$(IsWindowsOnlyTest)' != 'true'">
    <HelixAvailableTargetQueue Include="windows.11.arm64.open" Platform="Windows" />
  </ItemGroup>

  <PropertyGroup>
    <IsWindowsHelixQueue>false</IsWindowsHelixQueue>
    <IsWindowsHelixQueue Condition="$(HelixTargetQueue.ToUpperInvariant().Contains('WINDOWS'))">true</IsWindowsHelixQueue>
    <IsMacHelixQueue>false</IsMacHelixQueue>
    <IsMacHelixQueue Condition="$(HelixTargetQueue.ToUpperInvariant().Contains('OSX'))">true</IsMacHelixQueue>
  </PropertyGroup>
</Project>
