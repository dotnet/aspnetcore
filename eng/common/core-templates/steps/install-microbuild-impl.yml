parameters:
  - name: microbuildTaskInputs
    type: object
    default: {}

  - name: microbuildEnv
    type: object
    default: {}

  - name: enablePreviewMicrobuild
    type: boolean
    default: false

  - name: condition
    type: string

  - name: continueOnError
    type: boolean

steps:
- ${{ if eq(parameters.enablePreviewMicrobuild, 'true') }}:
    - task: MicroBuildSigningPluginPreview@4
      displayName: Install Preview MicroBuild plugin (Windows)
      inputs: ${{ parameters.microbuildTaskInputs }}
      env: ${{ parameters.microbuildEnv }}
      continueOnError: ${{ parameters.continueOnError }}
      condition: ${{ parameters.condition }}
- ${{ else }}:
  - task: MicroBuildSigningPlugin@4
    displayName: Install MicroBuild plugin (Windows)
    inputs: ${{ parameters.microbuildTaskInputs }}
    env: ${{ parameters.microbuildEnv }}
    continueOnError: ${{ parameters.continueOnError }}
    condition: ${{ parameters.condition }}